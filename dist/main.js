(()=>{"use strict";var t=document.getElementById("source"),e=t.getContext("2d"),a=document.getElementById("result-crt"),l=a.getContext("2d");e.fillStyle="#4f534d",e.fillRect(0,0,a.width,a.height),e.fill();var n=new Image;n.src="https://maeshchenko.github.io/crt-canvas/public/tv.png",n.onload=function(){l.drawImage(n,0,0,a.width,a.height)};var i=document.getElementById("source-video");document.getElementById("btn").onclick=function(){i.paused?i.play():i.pause()},i.addEventListener("play",(function(){console.log("PLAY!: ",l),requestAnimationFrame((function a(){l.fillStyle="#2a2a2a",l.fillRect(110,280,592,384),l.fill(),e.drawImage(i,0,0,60,60);for(var n=0;n<t.height;n++)for(var o=0;o<t.width;o++){d=e.getImageData(o,n,1,1).data,r=n,g=o,284,220,void 0,void 0,void 0,void 0,u=1.8,.2,.2,f=6.000000000000001,(c=l).beginPath(),c.roundRect(6*g+220,r*f+.2*r+284,u,f,5),c.fillStyle="rgba(255,0,0,".concat(d[0]/255,")"),c.fill(),c.beginPath(),c.fillStyle="rgba(0,255,0,".concat(d[1]/255,")"),c.roundRect(6*g+.2+u+220,r*f+.2*r+284,u,f,5),c.fill(),c.beginPath(),c.fillStyle="rgba(0,0,255,".concat(d[2]/255,")"),c.roundRect(6*g+.4+3.6+220,r*f+.2*r+284,u,f,5),c.fill()}var c,d,r,g,u,f;requestAnimationFrame(a)}))}))})();