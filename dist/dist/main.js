(()=>{"use strict";var t=document.getElementById("source"),e=t.getContext("2d"),a=document.getElementById("result-crt"),l=a.getContext("2d");e.fillStyle="#4f534d",e.fillRect(0,0,a.width,a.height),e.fill();var n=new Image;n.src="https://maeshchenko.github.io/crt-canvas/public/tv.png",n.onload=function(){l.drawImage(n,0,0,a.width,a.height)};var i=document.getElementById("source-video");document.getElementById("btn").onclick=function(){i.paused?i.play():i.pause()},i.addEventListener("play",(function(){console.log("PLAY!: ",l),requestAnimationFrame((function a(){l.fillStyle="#2a2a2a",l.fillRect(110,280,592,384),l.fill(),e.drawImage(i,0,0,60,60);for(var n=0;n<t.height;n++)for(var c=0;c<t.width;c++)r=e.getImageData(c,n,1,1).data,d=n,g=c,u=1.8,f=6.000000000000001,(o=l).beginPath(),o.roundRect(6*g+220,d*f+.2*d+284,u,f,5),o.fillStyle="rgba(255,0,0,".concat(r[0]/255,")"),o.fill(),o.beginPath(),o.fillStyle="rgba(0,255,0,".concat(r[1]/255,")"),o.roundRect(6*g+.2+u+220,d*f+.2*d+284,u,f,5),o.fill(),o.beginPath(),o.fillStyle="rgba(0,0,255,".concat(r[2]/255,")"),o.roundRect(6*g+.4+3.6+220,d*f+.2*d+284,u,f,5),o.fill();var o,r,d,g,u,f;requestAnimationFrame(a)}))}))})();