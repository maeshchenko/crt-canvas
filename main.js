(()=>{"use strict";var t=document.getElementById("source"),e=t.getContext("2d"),i=document.getElementById("result-crt"),n=i.getContext("2d");e.fillStyle="#4f534d",e.fillRect(0,0,i.width,i.height),e.fill();var o=new Image;o.src="https://maeshchenko.github.io/crt-canvas/public/tv1.png",o.setAttribute("crossOrigin",""),o.crossOrigin="Anonymous",o.onload=function(){n.drawImage(o,0,0,i.width,i.height)};var a=document.getElementById("source-video");a.setAttribute("crossOrigin",""),a.crossOrigin="Anonymous",document.getElementById("btn").onclick=function(){a.paused?a.play():a.pause()},a.addEventListener("play",(function(){console.log("PLAY!: ",n),requestAnimationFrame((function i(){n.fillStyle="#2a2a2a",n.fillRect(218,284,390,389),n.fill(),e.drawImage(a,0,0,60,60);for(var o=0;o<t.height;o++)for(var l=0;l<t.width;l++){c=e.getImageData(l,o,1,1).data,d=o,g=l,292,232,void 0,void 0,void 0,void 0,s=1.8,.2,.2,u=6.000000000000001,(r=n).beginPath(),r.roundRect(6*g+232,d*u+.2*d+292,s,u,5),r.fillStyle="rgba(255,0,0,".concat(c[0]/255,")"),r.fill(),r.beginPath(),r.fillStyle="rgba(0,255,0,".concat(c[1]/255,")"),r.roundRect(6*g+.2+s+232,d*u+.2*d+292,s,u,5),r.fill(),r.beginPath(),r.fillStyle="rgba(0,0,255,".concat(c[2]/255,")"),r.roundRect(6*g+.4+3.6+232,d*u+.2*d+292,s,u,5),r.fill()}var r,c,d,g,s,u;requestAnimationFrame(i)}))}))})();